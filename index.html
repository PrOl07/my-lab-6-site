<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Мій сайт — Classic (Ввід Collapse)</title>

<style>
body { margin: 0; padding: 0; background: #f0f0f0; font-family: Arial, sans-serif; }
table { border-collapse: collapse; margin: 0 auto; max-width: 700px; width: 100%; background: #ffffff; }
h1, h2, h3, p { margin: 0; padding: 5px 0; }
a { color: #000; text-decoration: none; font-weight: bold; }
a:hover { text-decoration: underline; }

.header { background: #a9c9f4; text-align: left; padding: 15px; }
.nav { background: #a9c9f4; text-align: left; padding: 10px 15px; }
.nav a { margin-right: 15px; }

.left { width: 180px; background: #d6e8d2; padding: 10px; }

/* Об’єднаний центральний + правий блок */
.main-wide { padding: 10px; background: #ffffff; }

input, textarea {
    width: 100%;
    padding: 8px;
    margin: 5px 0 10px 0;
    border: 1px solid #888;
    border-radius: 4px;
}
button {
    padding: 10px 20px;
    background: #a9c9f4;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
}
button:hover {
    background: #8bb2e6;
}

.footer { background: #a9c9f4; padding: 15px; font-size: 18px; font-weight: bold; text-align: left; }
</style>
</head>

<body>

<table role="presentation">

<!-- HEADER -->
<tr>
<td class="header" colspan="3">
    <h1>Мій сайт</h1>
    <h3>Code Your Future, One Line at a Time</h3>
</td>
</tr>

<!-- NAV -->
<tr>
<td class="nav" colspan="3">
    <a href="index.html">Головна</a>
    <a href="view.html">Перегляд Collapse</a>
</td>
</tr>

<!-- CONTENT -->
<tr>

<!-- LEFT -->
<td class="left">
    <h2>Геть рутину</h2>
    <p>Автоматизація скорочує час.</p>
</td>

<!-- ОБ’ЄДНАНИЙ БЛОК -->
<td class="main-wide" colspan="2">

<h2>Додати Collapse-елемент</h2>

<form id="collapseForm">
    <label>Заголовок:</label>
    <input type="text" id="title" required>

    <label>Контент:</label>
    <textarea id="content" rows="5" required></textarea>

    <button type="submit">Додати</button>
</form>

<p id="status"></p>

<script>
function saveItem(item) {
    // отримуємо поточні дані
    fetch('collapse_data.json')
        .then(res => res.json())
        .then(data => {
            data.push(item);

            // відправляємо на сервер (псевдо-запис — працює тільки з backend)
            fetch('save.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(() => {
                document.getElementById('status').textContent = "Елемент додано!";
            })
            .catch(() => {
                document.getElementById('status').textContent = "Помилка збереження!";
            });

        })
        .catch(() => {
            document.getElementById('status').textContent = "Не вдалося отримати дані!";
        });
}

document.getElementById('collapseForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const title = document.getElementById('title').value.trim();
    const content = document.getElementById('content').value.trim();

    if (!title || !content) return;

    saveItem({ title, content });

    document.getElementById('collapseForm').reset();
});
</script>

</td>

</tr>

<!-- FOOTER -->
<tr>
<td class="footer" colspan="3">
    <p>"Навчайся та твори!"</p>
</td>
</tr>

</table>

</body>
</html>
